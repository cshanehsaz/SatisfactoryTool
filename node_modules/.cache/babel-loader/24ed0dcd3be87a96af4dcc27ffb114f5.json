{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\cshan\\\\Box Sync\\\\website\\\\satisfactory2\\\\src\\\\components\\\\canvas.js\";\nimport React from 'react';\nimport Machine from './machine.js';\nimport Conveyer from './conveyer.js';\nimport MachineCursor from './machineCursor.js';\nimport MachineName from './machineName.js';\nimport MachineNode from '../backend/machineNode.js';\nimport '../css/canvas.css';\n\nvar Canvas =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Canvas, _React$Component);\n\n  function Canvas(props) {\n    var _this;\n\n    _classCallCheck(this, Canvas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Canvas).call(this, props));\n    _this.state = {\n      x: 0,\n      y: 0,\n      nodes: [],\n      conveyers: [],\n      currentTarget: {},\n      selector: false\n    };\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: \"handleMachineClick\",\n    value: function handleMachineClick(e) {\n      //conveyer connector tool\n      e.stopPropagation();\n\n      if (!this.state.selector) {\n        this.setState({\n          currentTarget: {\n            x1: e.target.getAttribute(\"cx\"),\n            y1: e.target.getAttribute(\"cy\")\n          },\n          selector: true\n        });\n      } else {\n        //creates a new conveyer\n        var _conveyers = this.state.conveyers;\n\n        _conveyers.push({\n          x1: this.state.currentTarget.x1,\n          y1: this.state.currentTarget.y1,\n          x2: e.target.getAttribute(\"cx\"),\n          y2: e.target.getAttribute(\"cy\")\n        });\n\n        this.setState({\n          conveyers: _conveyers,\n          currentTarget: {},\n          selector: false\n        });\n      }\n    }\n  }, {\n    key: \"_onMouseMove\",\n    value: function _onMouseMove(e) {\n      var rect = e.target.getBoundingClientRect();\n      this.setState({\n        x: e.screenX - rect.x,\n        y: e.screenY - rect.y - rect.top + 50\n      }); //50 to fix the bugs with cursors\n    }\n  }, {\n    key: \"_onClick\",\n    value: function _onClick(e) {\n      //at some point make this so that it's not redrawing all of them every frame, just stamps somewhere more permanent instead\n      var _nodes = this.state.nodes;\n\n      var _data = new MachineNode(this.props.tool);\n\n      fetch('localhost:6969/getmachineinput?name=constructor').then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        return console.log(data);\n      }); //fetch request for all of the data so that we ensure it's only done once and stored in state\n\n      _nodes.push({\n        x: this.state.x,\n        y: this.state.y,\n        data: _data\n      });\n\n      this.setState({\n        nodes: _nodes\n      });\n      console.log(this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          x = _this$state.x,\n          y = _this$state.y;\n      return React.createElement(\"div\", {\n        onMouseMove: this._onMouseMove.bind(this),\n        onClick: this._onClick.bind(this),\n        className: \"canvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        width: \"100%\",\n        height: \"100%\",\n        className: this.state.selector ? \"canvas-selector\" : \"canvas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, this.state.nodes.map(function (coordinate) {\n        return React.createElement(Machine, {\n          onClick: _this2.handleMachineClick.bind(_this2),\n          x: coordinate.x,\n          y: coordinate.y,\n          data: coordinate.data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        });\n      }), this.state.nodes.map(function (coordinate) {\n        return React.createElement(MachineName, {\n          name: coordinate.data.name,\n          x: coordinate.x,\n          y: coordinate.y,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n      }), this.state.conveyers.map(function (coors) {\n        return React.createElement(Conveyer, {\n          x1: coors.x1,\n          y1: coors.y1,\n          x2: coors.x2,\n          y2: coors.y2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        });\n      }), React.createElement(MachineCursor, {\n        x: x,\n        y: y,\n        onMouseMove: this._onMouseMove.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Canvas;\n}(React.Component);\n\nexport default Canvas; // this.state.selector ? {cursor: \"pointer\"} : {cursor: \"auto\"}","map":{"version":3,"sources":["C:\\Users\\cshan\\Box Sync\\website\\satisfactory2\\src\\components\\canvas.js"],"names":["React","Machine","Conveyer","MachineCursor","MachineName","MachineNode","Canvas","props","state","x","y","nodes","conveyers","currentTarget","selector","e","stopPropagation","setState","x1","target","getAttribute","y1","_conveyers","push","x2","y2","rect","getBoundingClientRect","screenX","screenY","top","_nodes","_data","tool","fetch","then","response","json","data","console","log","_onMouseMove","bind","_onClick","map","coordinate","handleMachineClick","name","coors","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Machine from './machine.js'\r\nimport Conveyer from './conveyer.js'\r\nimport MachineCursor from './machineCursor.js'\r\nimport MachineName from './machineName.js'\r\nimport MachineNode from '../backend/machineNode.js'\r\nimport '../css/canvas.css'\r\n\r\n\r\n\r\nclass Canvas extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { \r\n        x: 0, \r\n        y: 0, \r\n        nodes: [],\r\n        conveyers: [],\r\n        currentTarget: {},\r\n        selector: false,\r\n      };\r\n\r\n    }\r\n\r\n    handleMachineClick(e) { //conveyer connector tool\r\n      e.stopPropagation()\r\n\r\n      if(!this.state.selector) {\r\n        this.setState({\r\n          currentTarget: {x1: e.target.getAttribute(\"cx\"), y1: e.target.getAttribute(\"cy\")},\r\n          selector: true\r\n        })\r\n      }\r\n\r\n      else {\r\n        //creates a new conveyer\r\n        let _conveyers = this.state.conveyers;\r\n        _conveyers.push({x1: this.state.currentTarget.x1, y1: this.state.currentTarget.y1, x2: e.target.getAttribute(\"cx\"), y2: e.target.getAttribute(\"cy\")});\r\n        this.setState({\r\n          conveyers: _conveyers,\r\n          currentTarget: {},\r\n          selector: false\r\n        })\r\n      }\r\n      \r\n    }\r\n\r\n\r\n    _onMouseMove(e) {\r\n      let rect = e.target.getBoundingClientRect()\r\n      this.setState({ x: e.screenX - rect.x, y: e.screenY - rect.y - rect.top + 50}); //50 to fix the bugs with cursors\r\n    }\r\n\r\n    _onClick(e) { //at some point make this so that it's not redrawing all of them every frame, just stamps somewhere more permanent instead\r\n      let _nodes = this.state.nodes;\r\n      let _data = new MachineNode(this.props.tool)\r\n      fetch('localhost:6969/getmachineinput?name=constructor')\r\n        .then(response => response.json())\r\n        .then(data => console.log(data))\r\n      //fetch request for all of the data so that we ensure it's only done once and stored in state\r\n      _nodes.push({x: this.state.x, y: this.state.y, data: _data});\r\n      this.setState({nodes: _nodes});\r\n      console.log(this.state);\r\n    }\r\n  \r\n    render() {\r\n      const { x, y } = this.state;\r\n        return(\r\n          <div onMouseMove={this._onMouseMove.bind(this)} onClick={this._onClick.bind(this)} className=\"canvas\">\r\n            <svg width=\"100%\" height=\"100%\" className={this.state.selector ? \"canvas-selector\" : \"canvas\"}>\r\n              {/* maps all machines, machine names, and conveyers */}\r\n              {/* need to be able to pass down all data stored in a machine object that we create in this class and store in the array instead of key/val chain */}\r\n              {this.state.nodes.map(coordinate => <Machine onClick={this.handleMachineClick.bind(this)} x={coordinate.x} y={coordinate.y} data={coordinate.data}/>)}\r\n              {this.state.nodes.map(coordinate => <MachineName name={coordinate.data.name} x={coordinate.x} y={coordinate.y}/>)}\r\n              {this.state.conveyers.map(coors => <Conveyer x1={coors.x1} y1={coors.y1} x2={coors.x2} y2={coors.y2} />)} \r\n              <MachineCursor x={x} y={y} onMouseMove={this._onMouseMove.bind(this)}/>\r\n            </svg>\r\n          </div>\r\n          )\r\n    }\r\n  }\r\n\r\nexport default Canvas;\r\n\r\n\r\n// this.state.selector ? {cursor: \"pointer\"} : {cursor: \"auto\"}"]},"metadata":{},"sourceType":"module"}